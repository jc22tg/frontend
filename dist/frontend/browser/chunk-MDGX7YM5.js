import{b as D}from"./chunk-D4QL4JVC.js";import{$a as n,$b as d,$c as x,Gb as r,Hb as o,Mc as E,Nc as _,Pb as p,Vc as I,_b as a,ac as h,da as y,db as m,f as g,kb as f,mc as u,oc as v,qb as c,vc as C,xb as l}from"./chunk-FG6FKNI4.js";import"./chunk-OXVY4BEJ.js";function M(e,i){e&1&&(r(0,"div",5),a(1," Cargando historial... "),o())}function O(e,i){if(e&1&&(r(0,"div",6),a(1),o()),e&2){let t=p();n(),h(" ",t.error," ")}}function S(e,i){e&1&&(r(0,"div",7),a(1," No hay registros de historial para este elemento. "),o())}function b(e,i){if(e&1&&(r(0,"li",10)(1,"div",11)(2,"span",12),a(3),u(4,"date"),o(),r(5,"span",13),a(6),o()(),r(7,"div",14),a(8),o(),r(9,"div",15),a(10),o()()),e&2){let t=i.$implicit;n(3),d(v(4,4,t.date,"dd/MM/yyyy HH:mm")),n(3),d(t.user),n(2),d(t.action),n(2),d(t.details)}}function P(e,i){if(e&1&&(r(0,"ul",8),c(1,b,11,7,"li",9),o()),e&2){let t=p();n(),l("ngForOf",t.historyEntries)}}var H=class e{constructor(i,t){this.route=i;this.cdr=t}historyEntries=[];elementId=null;loading=!1;error=null;destroy$=new g;ngOnInit(){this.route.paramMap.pipe(y(this.destroy$)).subscribe(i=>{if(this.elementId=i.get("id"),!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.loadElementHistory()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setLoading(i){this.loading=i,this.cdr.markForCheck()}loadElementHistory(){if(!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.setLoading(!0),this.error=null,setTimeout(()=>{this.historyEntries=this.getMockHistoryData(),this.setLoading(!1)},1e3)}getMockHistoryData(){return[{id:"1",date:new Date(Date.now()-864e5),user:"admin",action:"Modificaci\xF3n",details:"Se actualizaron propiedades del elemento"},{id:"2",date:new Date(Date.now()-864e5*7),user:"tecnico",action:"Creaci\xF3n",details:"Se cre\xF3 el elemento"}]}static \u0275fac=function(t){return new(t||e)(m(D),m(C))};static \u0275cmp=f({type:e,selectors:[["app-element-history"]],decls:7,vars:4,consts:[[1,"history-container"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","history-list",4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],[1,"empty-state"],[1,"history-list"],["class","history-entry",4,"ngFor","ngForOf"],[1,"history-entry"],[1,"entry-header"],[1,"entry-date"],[1,"entry-user"],[1,"entry-action"],[1,"entry-details"]],template:function(t,s){t&1&&(r(0,"div",0)(1,"h2"),a(2,"Historial del Elemento"),o(),c(3,M,2,0,"div",1)(4,O,2,1,"div",2)(5,S,2,0,"div",3)(6,P,2,1,"ul",4),o()),t&2&&(n(3),l("ngIf",s.loading),n(),l("ngIf",s.error),n(),l("ngIf",!s.loading&&!s.error&&s.historyEntries.length===0),n(),l("ngIf",!s.loading&&s.historyEntries.length>0))},dependencies:[x,E,_,I],styles:[".history-container[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.history-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:1rem}.history-entry[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #eee;margin-bottom:1rem}.entry-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem;color:#666}.entry-action[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:1rem;text-align:center}.error-message[_ngcontent-%COMP%]{color:#d32f2f}"],changeDetection:0})};export{H as ElementHistoryComponent};
