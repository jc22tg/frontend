import{v as R,w as N}from"./chunk-VH7SA6GK.js";import"./chunk-4PHUDKEH.js";import{b as P,d as T,i as S}from"./chunk-D4QL4JVC.js";import{$a as a,$b as m,$c as _,Aa as g,Gb as r,Hb as i,Ib as E,Lc as M,Mb as w,Mc as O,Nc as k,Ob as v,Pb as d,_b as l,ac as b,da as x,db as u,f as y,ic as D,kb as f,qb as h,vc as I,xb as s,za as c}from"./chunk-FG6FKNI4.js";import"./chunk-OXVY4BEJ.js";var L=n=>({"important-row":n}),C=class n{label="";value=null;tooltip="";isImportant=!1;valueClass="";connection=null;elementType=null;static \u0275fac=function(e){return new(e||n)};static \u0275cmp=f({type:n,selectors:[["app-element-detail-row"]],inputs:{label:"label",value:"value",tooltip:"tooltip",isImportant:"isImportant",valueClass:"valueClass",connection:"connection",elementType:"elementType"},decls:5,vars:7,consts:[[1,"detail-row",3,"ngClass","matTooltip"],[1,"detail-label"],[1,"detail-value",3,"ngClass"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"div",1),l(2),i(),r(3,"div",2),l(4),i()()),e&2&&(s("ngClass",D(5,L,o.isImportant))("matTooltip",o.tooltip),a(2),m(o.label),a(),s("ngClass",o.valueClass),a(),m(o.value||"-"))},dependencies:[_,M,N,R],styles:[".detail-row[_ngcontent-%COMP%]{display:flex;padding:8px 0;border-bottom:1px solid #eee}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:500;color:#555}.detail-value[_ngcontent-%COMP%]{flex:2;color:#333;word-break:break-all}.important-row[_ngcontent-%COMP%]{background:#fffbe6;border-left:4px solid #ffc107}.warning-value[_ngcontent-%COMP%]{color:#d97706;font-weight:700}"]})};function $(n,t){n&1&&(r(0,"div",4),l(1," Cargando detalles... "),i())}function H(n,t){if(n&1&&(r(0,"div",5),l(1),i()),n&2){let e=d();a(),b(" ",e.error," ")}}function q(n,t){if(n&1&&E(0,"app-element-detail-row",14),n&2){let e=t.$implicit;s("label",e.key)("value",e.value)("tooltip",e.value)}}function z(n,t){if(n&1){let e=w();r(0,"div",6)(1,"div",7)(2,"h3"),l(3),i(),r(4,"span",8),l(5),i(),r(6,"span",9),l(7),i()(),r(8,"div",10)(9,"button",11),v("click",function(){c(e);let p=d();return g(p.editElement())}),l(10,"Editar"),i(),r(11,"button",11),v("click",function(){c(e);let p=d();return g(p.viewHistory())}),l(12,"Ver Historial"),i(),r(13,"button",11),v("click",function(){c(e);let p=d();return g(p.deleteElement())}),l(14,"Eliminar"),i()(),r(15,"div",12)(16,"h4"),l(17,"Propiedades"),i(),h(18,q,1,3,"app-element-detail-row",13),i()()}if(n&2){let e=d();a(3),m(e.element.name),a(2),m(e.element.type),a(2),m(e.element.status),a(11),s("ngForOf",e.getProperties())}}var V=class n{constructor(t,e,o){this.route=t;this.router=e;this.cdr=o}element=null;elementId=null;loading=!1;error=null;destroy$=new y;ngOnInit(){this.route.paramMap.pipe(x(this.destroy$)).subscribe(t=>{if(this.elementId=t.get("id"),!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.loadElementDetails()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}editElement(){this.elementId&&this.router.navigate([`/network-design/elements/${this.elementId}/edit`])}viewHistory(){this.elementId&&this.router.navigate([`/network-design/elements/${this.elementId}/history`])}deleteElement(){confirm("\xBFEst\xE1 seguro que desea eliminar este elemento?")&&(console.log("Eliminando elemento:",this.elementId),this.router.navigate(["/network-design/elements"]))}getProperties(){return!this.element||!this.element.properties?[]:Object.entries(this.element.properties).map(([t,e])=>({key:t,value:this.formatValue(e)}))}formatValue(t){if(t==null)return"No definido";if(typeof t=="boolean")return t?"S\xED":"No";if(Array.isArray(t))return t.length===0?"Lista vac\xEDa":t.join(", ");if(typeof t=="object"){let e=new Date(t);return isNaN(e.getTime())?JSON.stringify(t):e.toLocaleString()}return String(t)}setLoading(t){this.loading=t,this.cdr.markForCheck()}loadElementDetails(){if(!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.setLoading(!0),this.error=null,setTimeout(()=>{this.element=this.getMockElementData(),this.setLoading(!1),this.cdr.markForCheck()},1e3)}getMockElementData(){return{id:this.elementId,name:"Elemento de ejemplo",type:"OLT",status:"Activo",properties:{marca:"Huawei",modelo:"MA5600T",capacidad:"16 slots",firmware:"v2.1.5",instalacion:new Date("2023-03-15"),coordenadas:{lat:40.4168,lng:-3.7038},estaActivo:!0,puertos:48}}}static \u0275fac=function(e){return new(e||n)(u(P),u(T),u(I))};static \u0275cmp=f({type:n,selectors:[["app-element-details"]],decls:6,vars:3,consts:[[1,"details-container"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","element-details",4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],[1,"element-details"],[1,"element-header"],[1,"element-type"],[1,"element-status"],[1,"actions"],[3,"click"],[1,"properties"],[3,"label","value","tooltip",4,"ngFor","ngForOf"],[3,"label","value","tooltip"]],template:function(e,o){e&1&&(r(0,"div",0)(1,"h2"),l(2,"Detalles del Elemento"),i(),h(3,$,2,0,"div",1)(4,H,2,1,"div",2)(5,z,19,4,"div",3),i()),e&2&&(a(3),s("ngIf",o.loading),a(),s("ngIf",o.error),a(),s("ngIf",!o.loading&&!o.error&&o.element))},dependencies:[_,O,k,S,C],styles:[".details-container[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.element-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.element-type[_ngcontent-%COMP%], .element-status[_ngcontent-%COMP%]{padding:.2rem .5rem;border-radius:4px;font-size:.9rem}.element-type[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#0d47a1}.element-status[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:1rem 0}button[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}.properties[_ngcontent-%COMP%]{margin-top:1.5rem}.property-row[_ngcontent-%COMP%]{display:flex;padding:.5rem 0;border-bottom:1px solid #eee}.property-name[_ngcontent-%COMP%]{width:30%;font-weight:700}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{padding:1rem;text-align:center}.error-message[_ngcontent-%COMP%]{color:#d32f2f}"],changeDetection:0})};export{V as ElementDetailsComponent};
