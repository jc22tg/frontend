import{v as S,w as N}from"./chunk-VH7SA6GK.js";import"./chunk-4PHUDKEH.js";import{b as k,d as P,i as T}from"./chunk-D4QL4JVC.js";import{$a as a,$b as m,$c as _,Aa as g,Gb as r,Hb as o,Ib as y,Lc as M,Mb as E,Mc as D,Nc as O,Ob as h,Pb as d,_b as l,ac as w,da as x,db as f,f as C,ic as b,kb as u,qb as v,vc as I,xb as s,za as c}from"./chunk-FG6FKNI4.js";import"./chunk-OXVY4BEJ.js";var L=t=>({"important-row":t}),V=(()=>{class t{constructor(){this.label="",this.value=null,this.tooltip="",this.isImportant=!1,this.valueClass="",this.connection=null,this.elementType=null}static{this.\u0275fac=function(n){return new(n||t)}}static{this.\u0275cmp=u({type:t,selectors:[["app-element-detail-row"]],inputs:{label:"label",value:"value",tooltip:"tooltip",isImportant:"isImportant",valueClass:"valueClass",connection:"connection",elementType:"elementType"},decls:5,vars:7,consts:[[1,"detail-row",3,"ngClass","matTooltip"],[1,"detail-label"],[1,"detail-value",3,"ngClass"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"div",1),l(2),o(),r(3,"div",2),l(4),o()()),n&2&&(s("ngClass",b(5,L,i.isImportant))("matTooltip",i.tooltip),a(2),m(i.label),a(),s("ngClass",i.valueClass),a(),m(i.value||"-"))},dependencies:[_,M,N,S],styles:[".detail-row[_ngcontent-%COMP%]{display:flex;padding:8px 0;border-bottom:1px solid #eee}.detail-label[_ngcontent-%COMP%]{flex:1;font-weight:500;color:#555}.detail-value[_ngcontent-%COMP%]{flex:2;color:#333;word-break:break-all}.important-row[_ngcontent-%COMP%]{background:#fffbe6;border-left:4px solid #ffc107}.warning-value[_ngcontent-%COMP%]{color:#d97706;font-weight:700}"]})}}return t})();function R(t,p){t&1&&(r(0,"div",4),l(1," Cargando detalles... "),o())}function $(t,p){if(t&1&&(r(0,"div",5),l(1),o()),t&2){let e=d();a(),w(" ",e.error," ")}}function A(t,p){if(t&1&&y(0,"app-element-detail-row",14),t&2){let e=p.$implicit;s("label",e.key)("value",e.value)("tooltip",e.value)}}function H(t,p){if(t&1){let e=E();r(0,"div",6)(1,"div",7)(2,"h3"),l(3),o(),r(4,"span",8),l(5),o(),r(6,"span",9),l(7),o()(),r(8,"div",10)(9,"button",11),h("click",function(){c(e);let i=d();return g(i.editElement())}),l(10,"Editar"),o(),r(11,"button",11),h("click",function(){c(e);let i=d();return g(i.viewHistory())}),l(12,"Ver Historial"),o(),r(13,"button",11),h("click",function(){c(e);let i=d();return g(i.deleteElement())}),l(14,"Eliminar"),o()(),r(15,"div",12)(16,"h4"),l(17,"Propiedades"),o(),v(18,A,1,3,"app-element-detail-row",13),o()()}if(t&2){let e=d();a(3),m(e.element.name),a(2),m(e.element.type),a(2),m(e.element.status),a(11),s("ngForOf",e.getProperties())}}var Y=(()=>{class t{constructor(e,n,i){this.route=e,this.router=n,this.cdr=i,this.element=null,this.elementId=null,this.loading=!1,this.error=null,this.destroy$=new C}ngOnInit(){this.route.paramMap.pipe(x(this.destroy$)).subscribe(e=>{if(this.elementId=e.get("id"),!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.loadElementDetails()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}editElement(){this.elementId&&this.router.navigate([`/network-design/elements/${this.elementId}/edit`])}viewHistory(){this.elementId&&this.router.navigate([`/network-design/elements/${this.elementId}/history`])}deleteElement(){confirm("\xBFEst\xE1 seguro que desea eliminar este elemento?")&&(console.log("Eliminando elemento:",this.elementId),this.router.navigate(["/network-design/elements"]))}getProperties(){return!this.element||!this.element.properties?[]:Object.entries(this.element.properties).map(([e,n])=>({key:e,value:this.formatValue(n)}))}formatValue(e){if(e==null)return"No definido";if(typeof e=="boolean")return e?"S\xED":"No";if(Array.isArray(e))return e.length===0?"Lista vac\xEDa":e.join(", ");if(typeof e=="object"){let n=new Date(e);return isNaN(n.getTime())?JSON.stringify(e):n.toLocaleString()}return String(e)}setLoading(e){this.loading=e,this.cdr.markForCheck()}loadElementDetails(){if(!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.setLoading(!0),this.error=null,setTimeout(()=>{this.element=this.getMockElementData(),this.setLoading(!1),this.cdr.markForCheck()},1e3)}getMockElementData(){return{id:this.elementId,name:"Elemento de ejemplo",type:"OLT",status:"Activo",properties:{marca:"Huawei",modelo:"MA5600T",capacidad:"16 slots",firmware:"v2.1.5",instalacion:new Date("2023-03-15"),coordenadas:{lat:40.4168,lng:-3.7038},estaActivo:!0,puertos:48}}}static{this.\u0275fac=function(n){return new(n||t)(f(k),f(P),f(I))}}static{this.\u0275cmp=u({type:t,selectors:[["app-element-details"]],decls:6,vars:3,consts:[[1,"details-container"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","element-details",4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],[1,"element-details"],[1,"element-header"],[1,"element-type"],[1,"element-status"],[1,"actions"],[3,"click"],[1,"properties"],[3,"label","value","tooltip",4,"ngFor","ngForOf"],[3,"label","value","tooltip"]],template:function(n,i){n&1&&(r(0,"div",0)(1,"h2"),l(2,"Detalles del Elemento"),o(),v(3,R,2,0,"div",1)(4,$,2,1,"div",2)(5,H,19,4,"div",3),o()),n&2&&(a(3),s("ngIf",i.loading),a(),s("ngIf",i.error),a(),s("ngIf",!i.loading&&!i.error&&i.element))},dependencies:[_,D,O,T,V],styles:[".details-container[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.element-header[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem;margin-bottom:1rem}.element-type[_ngcontent-%COMP%], .element-status[_ngcontent-%COMP%]{padding:.2rem .5rem;border-radius:4px;font-size:.9rem}.element-type[_ngcontent-%COMP%]{background-color:#e3f2fd;color:#0d47a1}.element-status[_ngcontent-%COMP%]{background-color:#e8f5e9;color:#2e7d32}.actions[_ngcontent-%COMP%]{display:flex;gap:1rem;margin:1rem 0}button[_ngcontent-%COMP%]{padding:.5rem 1rem;cursor:pointer}.properties[_ngcontent-%COMP%]{margin-top:1.5rem}.property-row[_ngcontent-%COMP%]{display:flex;padding:.5rem 0;border-bottom:1px solid #eee}.property-name[_ngcontent-%COMP%]{width:30%;font-weight:700}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%]{padding:1rem;text-align:center}.error-message[_ngcontent-%COMP%]{color:#d32f2f}"],changeDetection:0})}}return t})();export{Y as ElementDetailsComponent};
