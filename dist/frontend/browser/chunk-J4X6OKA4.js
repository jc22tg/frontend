import{c as T}from"./chunk-HQFFMNXZ.js";import"./chunk-4RASZFGW.js";import{B as N,b as F,d as g,g as S,h as k,l as y,o as I,r as R,z as E}from"./chunk-JO2MD4NL.js";import{b as M,d as b,e as O,i as x}from"./chunk-D4QL4JVC.js";import{$a as i,$c as h,Gb as s,Hb as n,Ib as f,Nc as v,Ob as C,Pb as p,_b as a,ac as w,db as l,kb as _,qb as u,xb as d}from"./chunk-FG6FKNI4.js";import"./chunk-OXVY4BEJ.js";function V(t,c){t&1&&(s(0,"span"),a(1,"La contrase\xF1a es requerida"),n())}function j(t,c){t&1&&(s(0,"span"),a(1,"M\xEDnimo 8 caracteres"),n())}function q(t,c){if(t&1&&(s(0,"div",13),u(1,V,2,0,"span",14)(2,j,2,0,"span",14),n()),t&2){let r,o,e=p();i(),d("ngIf",(r=e.resetPasswordForm.get("newPassword"))==null||r.errors==null?null:r.errors.required),i(),d("ngIf",(o=e.resetPasswordForm.get("newPassword"))==null||o.errors==null?null:o.errors.minlength)}}function D(t,c){t&1&&(s(0,"div",13),a(1," Las contrase\xF1as no coinciden "),n())}function L(t,c){if(t&1&&(s(0,"div",15),a(1),n()),t&2){let r=p();i(),w(" ",r.successMessage," ")}}function G(t,c){if(t&1&&(s(0,"div",16),a(1),n()),t&2){let r=p();i(),w(" ",r.errorMessage," ")}}var W=(()=>{class t{constructor(r,o,e,m){this.fb=r,this.authService=o,this.route=e,this.router=m,this.token="",this.errorMessage="",this.successMessage="",this.resetPasswordForm=this.fb.group({newPassword:["",[g.required,g.minLength(8)]],confirmPassword:["",[g.required]]},{validators:this.passwordMatchValidator})}ngOnInit(){this.route.queryParams.subscribe(r=>{this.token=r.token,this.token||this.router.navigate(["/auth/login"])})}passwordMatchValidator(r){let o=r.get("newPassword")?.value,e=r.get("confirmPassword")?.value;return o===e?null:{mismatch:!0}}onSubmit(){if(this.resetPasswordForm.valid&&this.token){let{newPassword:r,confirmPassword:o}=this.resetPasswordForm.value;this.authService.resetPassword(this.token,r,o).subscribe({next:()=>{this.successMessage="Contrase\xF1a restablecida exitosamente",this.errorMessage="",setTimeout(()=>{this.router.navigate(["/auth/login"])},3e3)},error:e=>{this.errorMessage=e.error?.message||"Error al restablecer la contrase\xF1a",this.successMessage=""}})}}static{this.\u0275fac=function(o){return new(o||t)(l(E),l(T),l(M),l(b))}}static{this.\u0275cmp=_({type:t,selectors:[["app-reset-password"]],decls:21,vars:6,consts:[[1,"reset-password-container"],[1,"reset-password-form",3,"ngSubmit","formGroup"],[1,"form-group"],["for","newPassword"],["type","password","id","newPassword","formControlName","newPassword","placeholder","Ingrese su nueva contrase\xF1a"],["class","error",4,"ngIf"],["for","confirmPassword"],["type","password","id","confirmPassword","formControlName","confirmPassword","placeholder","Confirme su nueva contrase\xF1a"],["class","success-message",4,"ngIf"],["class","error-message",4,"ngIf"],["type","submit",3,"disabled"],[1,"login-link"],["routerLink","/auth/login"],[1,"error"],[4,"ngIf"],[1,"success-message"],[1,"error-message"]],template:function(o,e){if(o&1&&(s(0,"div",0)(1,"form",1),C("ngSubmit",function(){return e.onSubmit()}),s(2,"h2"),a(3,"Restablecer Contrase\xF1a"),n(),s(4,"div",2)(5,"label",3),a(6,"Nueva Contrase\xF1a"),n(),f(7,"input",4),u(8,q,3,2,"div",5),n(),s(9,"div",2)(10,"label",6),a(11,"Confirmar Nueva Contrase\xF1a"),n(),f(12,"input",7),u(13,D,2,0,"div",5),n(),u(14,L,2,1,"div",8)(15,G,2,1,"div",9),s(16,"button",10),a(17,"Restablecer Contrase\xF1a"),n(),s(18,"p",11)(19,"a",12),a(20,"Volver al inicio de sesi\xF3n"),n()()()()),o&2){let m,P;i(),d("formGroup",e.resetPasswordForm),i(7),d("ngIf",((m=e.resetPasswordForm.get("newPassword"))==null?null:m.touched)&&((m=e.resetPasswordForm.get("newPassword"))==null?null:m.errors)),i(5),d("ngIf",((P=e.resetPasswordForm.get("confirmPassword"))==null?null:P.touched)&&(e.resetPasswordForm.errors==null?null:e.resetPasswordForm.errors.mismatch)),i(),d("ngIf",e.successMessage),i(),d("ngIf",e.errorMessage),i(),d("disabled",e.resetPasswordForm.invalid||!e.token)}},dependencies:[h,v,N,y,F,S,k,I,R,x,O],styles:[".reset-password-container[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;min-height:100vh;background-color:#f5f5f5}.reset-password-form[_ngcontent-%COMP%]{background:#fff;padding:2rem;border-radius:8px;box-shadow:0 2px 4px #0000001a;width:100%;max-width:400px}.reset-password-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;color:#333}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]{margin-bottom:1rem}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;margin-bottom:.5rem;color:#666}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:.5rem;border:1px solid #ddd;border-radius:4px;font-size:1rem}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{outline:none;border-color:#007bff}.reset-password-form[_ngcontent-%COMP%]   .form-group[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#dc3545;font-size:.875rem;margin-top:.25rem}.reset-password-form[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:#28a745;text-align:center;margin-bottom:1rem}.reset-password-form[_ngcontent-%COMP%]   .error-message[_ngcontent-%COMP%]{color:#dc3545;text-align:center;margin-bottom:1rem}.reset-password-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%;padding:.75rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;font-size:1rem;cursor:pointer;transition:background-color .2s}.reset-password-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.reset-password-form[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc;cursor:not-allowed}.reset-password-form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;color:#666}.reset-password-form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#007bff;text-decoration:none}.reset-password-form[_ngcontent-%COMP%]   .login-link[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}"]})}}return t})();export{W as ResetPasswordComponent};
