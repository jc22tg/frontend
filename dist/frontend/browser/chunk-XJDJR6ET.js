import{b as D}from"./chunk-D4QL4JVC.js";import{$a as i,$b as m,$c as M,Gb as o,Hb as n,Mc as E,Nc as x,Pb as g,Vc as I,_b as r,ac as u,da as h,db as c,f as y,kb as f,mc as v,oc as _,qb as p,vc as C,xb as l}from"./chunk-FG6FKNI4.js";import"./chunk-OXVY4BEJ.js";function H(e,d){e&1&&(o(0,"div",5),r(1," Cargando historial... "),n())}function O(e,d){if(e&1&&(o(0,"div",6),r(1),n()),e&2){let t=g();i(),u(" ",t.error," ")}}function S(e,d){e&1&&(o(0,"div",7),r(1," No hay registros de historial para este elemento. "),n())}function P(e,d){if(e&1&&(o(0,"li",10)(1,"div",11)(2,"span",12),r(3),v(4,"date"),n(),o(5,"span",13),r(6),n()(),o(7,"div",14),r(8),n(),o(9,"div",15),r(10),n()()),e&2){let t=d.$implicit;i(3),m(_(4,4,t.date,"dd/MM/yyyy HH:mm")),i(3),m(t.user),i(2),m(t.action),i(2),m(t.details)}}function b(e,d){if(e&1&&(o(0,"ul",8),p(1,P,11,7,"li",9),n()),e&2){let t=g();i(),l("ngForOf",t.historyEntries)}}var $=(()=>{class e{constructor(t,s){this.route=t,this.cdr=s,this.historyEntries=[],this.elementId=null,this.loading=!1,this.error=null,this.destroy$=new y}ngOnInit(){this.route.paramMap.pipe(h(this.destroy$)).subscribe(t=>{if(this.elementId=t.get("id"),!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.loadElementHistory()})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}setLoading(t){this.loading=t,this.cdr.markForCheck()}loadElementHistory(){if(!this.elementId){this.error="No se especific\xF3 un ID de elemento",this.setLoading(!1);return}this.setLoading(!0),this.error=null,setTimeout(()=>{this.historyEntries=this.getMockHistoryData(),this.setLoading(!1)},1e3)}getMockHistoryData(){return[{id:"1",date:new Date(Date.now()-864e5),user:"admin",action:"Modificaci\xF3n",details:"Se actualizaron propiedades del elemento"},{id:"2",date:new Date(Date.now()-864e5*7),user:"tecnico",action:"Creaci\xF3n",details:"Se cre\xF3 el elemento"}]}static{this.\u0275fac=function(s){return new(s||e)(c(D),c(C))}}static{this.\u0275cmp=f({type:e,selectors:[["app-element-history"]],decls:7,vars:4,consts:[[1,"history-container"],["class","loading-indicator",4,"ngIf"],["class","error-message",4,"ngIf"],["class","empty-state",4,"ngIf"],["class","history-list",4,"ngIf"],[1,"loading-indicator"],[1,"error-message"],[1,"empty-state"],[1,"history-list"],["class","history-entry",4,"ngFor","ngForOf"],[1,"history-entry"],[1,"entry-header"],[1,"entry-date"],[1,"entry-user"],[1,"entry-action"],[1,"entry-details"]],template:function(s,a){s&1&&(o(0,"div",0)(1,"h2"),r(2,"Historial del Elemento"),n(),p(3,H,2,0,"div",1)(4,O,2,1,"div",2)(5,S,2,0,"div",3)(6,b,2,1,"ul",4),n()),s&2&&(i(3),l("ngIf",a.loading),i(),l("ngIf",a.error),i(),l("ngIf",!a.loading&&!a.error&&a.historyEntries.length===0),i(),l("ngIf",!a.loading&&a.historyEntries.length>0))},dependencies:[M,E,x,I],styles:[".history-container[_ngcontent-%COMP%]{padding:1rem;max-width:800px;margin:0 auto}.history-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin-top:1rem}.history-entry[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #eee;margin-bottom:1rem}.entry-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:.5rem;font-size:.9rem;color:#666}.entry-action[_ngcontent-%COMP%]{font-weight:700;margin-bottom:.5rem}.loading-indicator[_ngcontent-%COMP%], .error-message[_ngcontent-%COMP%], .empty-state[_ngcontent-%COMP%]{padding:1rem;text-align:center}.error-message[_ngcontent-%COMP%]{color:#d32f2f}"],changeDetection:0})}}return e})();export{$ as ElementHistoryComponent};
