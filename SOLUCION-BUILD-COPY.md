# ================================================================
# SOLUCIÓN BUILD-TIME COPY: Copia Automática de Definiciones
# ================================================================

## CONCEPTO
Copiar automáticamente las definiciones del backend al frontend durante el build.

## VENTAJAS
✅ Implementación rápida
✅ Mantiene estructura actual del frontend
✅ No requiere cambios mayores
✅ Compatible con desarrollo y producción

## IMPLEMENTACIÓN

### 1. Script de Sincronización
```powershell
# frontend/sync-definitions.ps1
$source = "..\backend\src\shared\common-definitions"
$target = ".\src\generated\common-definitions"

Write-Host "Sincronizando common-definitions..." -ForegroundColor Green

# Limpiar directorio anterior
if (Test-Path $target) {
    Remove-Item $target -Recurse -Force
}

# Crear directorio destino
New-Item -ItemType Directory -Path $target -Force | Out-Null

# Copiar archivos
robocopy $source $target /E /XD node_modules /NFL /NDL /NJH /NJS

# Generar index.ts principal
@"
// Auto-generated from backend/src/shared/common-definitions
// DO NOT MODIFY - This file is automatically generated

export * from './entities';
export * from './enums';
export * from './dtos';
export * from './interfaces';
export * from './types';
"@ | Out-File -FilePath "$target\index.ts" -Encoding UTF8

Write-Host "✅ Sincronización completada" -ForegroundColor Green
```

### 2. Actualizar package.json
```json
{
  "scripts": {
    "sync-definitions": "powershell -ExecutionPolicy Bypass -File sync-definitions.ps1",
    "prebuild": "npm run sync-definitions",
    "prestart": "npm run sync-definitions",
    "build": "ng build",
    "start": "ng serve"
  }
}
```

### 3. Actualizar tsconfig.json
```json
{
  "compilerOptions": {
    "paths": {
      "@common-definitions": ["src/generated/common-definitions"],
      "@common-definitions/*": ["src/generated/common-definitions/*"]
    }
  }
}
```

### 4. Actualizar .gitignore
```
src/generated/
```

## FLUJO DE TRABAJO
1. Desarrollador inicia frontend (`npm start`)
2. Script copia automáticamente definiciones
3. Frontend usa definiciones actualizadas
4. Git ignora archivos generados

## VENTAJAS DE ESTA SOLUCIÓN
- ✅ Implementación inmediata
- ✅ No rompe código existente
- ✅ Sincronización automática
- ✅ Compatible con hot-reload
