<div class="shortcuts-dialog">
  <h2 mat-dialog-title>
    <span>Atajos de teclado</span>
    <div class="dialog-actions">
      <button mat-button class="toggle-button" (click)="toggleShowAllShortcuts()">
        {{ showAllShortcuts ? 'Mostrar solo activos' : 'Mostrar todos' }}
      </button>
      <button mat-icon-button aria-label="Cerrar" (click)="close()">
        <mat-icon>close</mat-icon>
      </button>
    </div>
  </h2>
  
  <div class="contexts-info" *ngIf="activeContexts.length > 0">
    <span class="contexts-label">Contextos activos:</span>
    <mat-chip-set>
      <mat-chip *ngFor="let context of activeContexts">{{ context }}</mat-chip>
    </mat-chip-set>
  </div>
  
  <mat-dialog-content>
    <div class="empty-state" *ngIf="shortcutGroups.length === 0">
      <mat-icon>keyboard</mat-icon>
      <p>No hay atajos de teclado {{ showAllShortcuts ? 'registrados' : 'activos' }}</p>
    </div>
    
    <div class="shortcut-groups" *ngIf="shortcutGroups.length > 0">
      <mat-expansion-panel *ngFor="let group of shortcutGroups" [expanded]="true">
        <mat-expansion-panel-header>
          <mat-panel-title>
            {{ group.name }}
          </mat-panel-title>
        </mat-expansion-panel-header>
        
        <div class="shortcuts-table">
          <table>
            <thead>
              <tr>
                <th class="shortcut-header">Atajo</th>
                <th class="description-header">Descripci√≥n</th>
                <th class="context-header" *ngIf="showAllShortcuts">Contexto</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let shortcut of group.shortcuts" [class.inactive]="showAllShortcuts && !isShortcutActive(shortcut)">
                <td class="shortcut-key">
                  <kbd>{{ formatKeyCombo(shortcut) }}</kbd>
                </td>
                <td class="shortcut-description">
                  {{ shortcut.description }}
                </td>
                <td class="shortcut-context" *ngIf="showAllShortcuts">
                  <span [matTooltip]="getContextsLabel(shortcut)">
                    {{ shortcut.contexts && shortcut.contexts.length ? shortcut.contexts[0] : 'Global' }}
                    <span *ngIf="shortcut.contexts && shortcut.contexts.length > 1">+{{ shortcut.contexts.length - 1 }}</span>
                  </span>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </mat-expansion-panel>
    </div>
  </mat-dialog-content>
  
  <mat-dialog-actions align="end">
    <button mat-button (click)="close()">Cerrar</button>
  </mat-dialog-actions>
</div> 