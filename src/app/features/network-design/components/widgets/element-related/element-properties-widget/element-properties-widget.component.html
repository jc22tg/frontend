<div class="element-properties-widget">
  <div class="widget-header">
    <div class="element-title">
      <div class="element-icon" [ngClass]="selectedElement.type.toLowerCase()">
        <mat-icon>{{ getElementTypeIcon(selectedElement.type) }}</mat-icon>
      </div>
      <div class="element-info">
        <h3 class="element-name">{{ selectedElement.name || 'Sin nombre' }}</h3>
        <div class="element-status" [ngClass]="selectedElement.status.toLowerCase()">
          <span class="status-dot"></span>
          <span>{{ getStatusLabel(selectedElement.status) }}</span>
        </div>
      </div>
    </div>
  </div>

  <mat-divider></mat-divider>

  <div class="element-details">
    <div class="detail-group">
      <h4>Información básica</h4>
      <div class="detail-row">
        <span class="detail-label">ID:</span>
        <span class="detail-value">{{ selectedElement.id }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Código:</span>
        <span class="detail-value">{{ selectedElement.id }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Tipo:</span>
        <span class="detail-value">{{ getElementTypeName(selectedElement.type) }}</span>
      </div>
      <div class="detail-row">
        <span class="detail-label">Estado:</span>
        <span class="detail-value" [ngClass]="selectedElement.status.toLowerCase()">
          {{ getStatusLabel(selectedElement.status) }}
        </span>
      </div>
    </div>

    <div class="detail-group">
      <h4>Ubicación</h4>
      <div class="detail-row">
        <span class="detail-label">Coordenadas:</span>
        <span class="detail-value">
          {{ formatCoordinates(selectedElement.position.coordinates) }}
        </span>
      </div>
      <div class="map-preview">
        <button mat-button color="primary" (click)="centerOnMap()">
          <mat-icon>my_location</mat-icon>
          Centrar en mapa
        </button>
      </div>
    </div>

    <div class="detail-group" *ngIf="selectedElement.description">
      <h4>Descripción</h4>
      <div class="detail-row">
        <p class="description">{{ selectedElement.description }}</p>
      </div>
    </div>

    <div class="detail-group" *ngIf="selectedElement.metadata">
      <h4>Propiedades técnicas</h4>
      <div class="detail-row" *ngFor="let prop of getMetadataEntries()">
        <span class="detail-label">{{ formatPropertyName(prop.key) }}:</span>
        <span class="detail-value">{{ formatPropertyValue(prop.value) }}</span>
      </div>
    </div>

    <div class="detail-group" *ngIf="connections && connections.length > 0">
      <h4>Conexiones ({{ connections.length }})</h4>
      <div class="connection-list">
        <div class="connection-item" *ngFor="let conn of connections">
          <div class="connection-icon">
            <mat-icon>link</mat-icon>
          </div>
          <div class="connection-details">
            <div class="connection-name">{{ conn.name || 'Conexión ' + conn.id }}</div>
            <div class="connection-type">{{ getConnectionTypeName(conn.type) }}</div>
          </div>
          <div class="connection-status" [ngClass]="conn.status.toLowerCase()">
            <span class="status-dot"></span>
          </div>
        </div>
      </div>
    </div>

    <div class="actions">
      <button mat-button color="primary" (click)="editElement()">
        <mat-icon>edit</mat-icon>
        Editar
      </button>
      <button mat-button color="warn" (click)="deleteElement()">
        <mat-icon>delete</mat-icon>
        Eliminar
      </button>
    </div>
  </div>
</div> 