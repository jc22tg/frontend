<div class="dialog-container debug-container">
  <!-- Encabezado fijo -->
  <div class="dialog-header fixed-header" [ngClass]="{'create': mode === 'create', 'edit': mode === 'edit'}">
    <div class="header-icon">
      <mat-icon color="primary">{{ mode === 'create' ? 'add_link' : 'edit_link' }}</mat-icon>
    </div>
    <div class="header-content">
      <h2 mat-dialog-title class="small-title">{{ mode === 'create' ? 'Crear Conexión' : 'Editar Conexión' }}</h2>
      <p class="subtitle">{{ mode === 'create' ? 'Defina una nueva conexión entre elementos' : 'Modifique los detalles de la conexión existente' }}</p>
    </div>
  </div>
  
  <mat-divider></mat-divider>
  
  <!-- Área scrollable -->
  <div class="form-content debug-content scrollable-content">
    <form [formGroup]="connectionForm" (ngSubmit)="onSave()">
      <div class="debug-card">
        <h3>Elementos de la Conexión</h3>
        
        <div class="form-row">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Elemento Origen</mat-label>
            <mat-select formControlName="sourceElementId" required>
              <mat-option *ngFor="let element of availableElements" [value]="element.id">
                {{ element.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Elemento Destino</mat-label>
            <mat-select formControlName="targetElementId" required>
              <mat-option *ngFor="let element of getAvailableTargets()" [value]="element.id">
                {{ element.name }}
              </mat-option>
            </mat-select>
          </mat-form-field>
        </div>
      </div>
      
      <div class="debug-card">
        <h3>Configuración Principal</h3>
        
        <div class="form-row">
          <mat-form-field appearance="fill">
            <mat-label>Estado</mat-label>
            <mat-select formControlName="status" required>
              <mat-option [value]="ElementStatus.ACTIVE">Activo</mat-option>
              <mat-option [value]="ElementStatus.INACTIVE">Inactivo</mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Tipo de Fibra</mat-label>
            <mat-select formControlName="fiberType">
              <mat-option [value]="FiberType.SINGLE_MODE">Monomodo</mat-option>
              <mat-option [value]="FiberType.MULTI_MODE">Multimodo</mat-option>
            </mat-select>
          </mat-form-field>
        </div>

        <div class="form-row">
          <mat-form-field appearance="fill">
            <mat-label>Longitud (metros)</mat-label>
            <input matInput type="number" formControlName="length" min="0">
          </mat-form-field>

          <mat-form-field appearance="fill">
            <mat-label>Capacidad</mat-label>
            <input matInput type="number" formControlName="capacity" min="0">
          </mat-form-field>
        </div>
      </div>
      
      <div class="debug-card">
        <h3>Información Adicional</h3>
        
        <div class="form-row">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Etiqueta</mat-label>
            <input matInput formControlName="label">
          </mat-form-field>
        </div>
        
        <div class="form-row">
          <mat-form-field appearance="fill" class="full-width">
            <mat-label>Descripción</mat-label>
            <textarea matInput formControlName="description" rows="2"></textarea>
          </mat-form-field>
        </div>
      </div>
      
      <!-- Agregar un espacio vacío para asegurar scroll adecuado -->
      <div class="space-buffer"></div>
    </form>
  </div>
  
  <mat-divider></mat-divider>
  
  <!-- Botones fijos -->
  <div class="dialog-actions fixed-footer">
    <button mat-stroked-button (click)="onCancel()" [disabled]="loading">
      Cancelar
    </button>
    <button mat-flat-button color="primary" [disabled]="connectionForm.invalid || loading" (click)="onSave()">
      <mat-icon>{{ mode === 'create' ? 'add' : 'save' }}</mat-icon>
      {{ mode === 'create' ? 'Crear' : 'Actualizar' }}
      <mat-spinner *ngIf="loading" diameter="18" class="button-spinner"></mat-spinner>
    </button>
  </div>
</div> 