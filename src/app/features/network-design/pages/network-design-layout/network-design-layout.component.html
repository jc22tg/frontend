<div class="network-design-layout">
  <header class="design-header">
    <h1>Diseño de Red</h1>
    
    <nav class="design-nav">
      <a mat-button [routerLink]="['/network-design/map']" routerLinkActive="active">
        <mat-icon>map</mat-icon>
        <span>Mapa de Red</span>
      </a>
      <a mat-button [routerLink]="['/network-design/elements']" routerLinkActive="active">
        <mat-icon>category</mat-icon>
        <span>Elementos</span>
      </a>
      <a mat-button [routerLink]="['/network-design/connections']" routerLinkActive="active">
        <mat-icon>device_hub</mat-icon>
        <span>Conexiones</span>
      </a>
      <a mat-button [routerLink]="['/network-design/monitoring']" routerLinkActive="active">
        <mat-icon>monitoring</mat-icon>
        <span>Monitoreo</span>
      </a>
      
      <!-- Menú desplegable de creación de elementos -->
      <div class="menu-container">
        <button mat-button [matMenuTriggerFor]="elementMenu" class="create-button">
          <mat-icon>add_circle</mat-icon>
          <span>Crear Nuevo Elemento</span>
          <mat-icon>arrow_drop_down</mat-icon>
        </button>
        
        <mat-menu #elementMenu="matMenu" class="element-type-menu">
          <ng-container *ngFor="let type of elementTypes">
            <button mat-menu-item (click)="createNewElement(type.id)">
              <mat-icon>{{ 
                type.id === 'fdp' ? 'dns' :
                type.id === 'olt' ? 'router' :
                type.id === 'ont' ? 'device_hub' :
                type.id === 'edfa' ? 'wifi_tethering' :
                type.id === 'splitter' ? 'call_split' :
                type.id === 'manga' ? 'view_comfy' :
                type.id === 'fiber_connection' ? 'timeline' : 'category'
              }}</mat-icon>
              <span>{{ type.name }}</span>
            </button>
          </ng-container>
        </mat-menu>
      </div>
    </nav>
  </header>
  
  <main class="design-content">
    <div class="network-design-content">
      <div class="network-design-container" [ngClass]="{'map-hidden': !mapVisible}">
        <div [@routeAnimations]="prepareRoute(outlet)" class="router-container">
          <router-outlet #outlet="outlet"></router-outlet>
        </div>
      </div>
      
      <!-- Componente de vista rápida cuando hay un elemento seleccionado -->
      <app-element-quick-view 
        *ngIf="selectedElement && showElementsPanel" 
        class="element-details-panel"
        (viewConnections)="openConnectionsView($event)">
      </app-element-quick-view>

      <!-- Visor de conexiones -->
      <app-element-connections-view
        *ngIf="showConnectionsView && connectionsElementId"
        [elementId]="connectionsElementId"
        (close)="closeConnectionsView()"
        class="connections-view-overlay">
      </app-element-connections-view>
    </div>
  </main>
</div> 